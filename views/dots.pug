<!DOCTYPE html>
html(lang="en")
    head
        meta(charset="UTF-8")
        meta(name="viewport", content="width=device-width, initial-scale=1.0")
        meta(http-equiv="X-UA-Compatible", content="ie=edge")
        title= project
        link(href="/public/style.css", rel="stylesheet")

        script(src="/public/lib/d3.v4.min.js")
        script(src="/public/lib/jquery-3.2.1.min.js")
        //- script(src="//d3js.org/d3.v4.min.js")
        //- script(src="https://code.jquery.com/jquery-3.2.1.min.js", integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=", crossorigin="anonymous")
    body
        svg
            g#canvas
        script(src="/public/input-panel.js")
        script(src="/public/input-midi.js")
        script(src="/public/input-keyboard.js")
        script(src="/public/dots-visualization.js")
        script(src="/public/controller.js")
        script.
            const PROJECT = "#{project}";
            let fake = { update() {
                console.log('updating')}, 
                initialize() {console.log('initialzing');} 
            };
            d3.select('svg')
                .attr('width', window.innerWidth)
                .attr('height', window.innerHeight);

            const container = d3.select('#canvas')
            const CONTROL_PANEL_WIDTH = 100;
            const app = new Controller(
                            new DotsVisualization(container, {
                                left: CONTROL_PANEL_WIDTH,
                                top: 0,
                                width: window.innerWidth - CONTROL_PANEL_WIDTH,
                                height: window.innerHeight
                            }), 
                            new InputPanel(container, {
                                left: 0,
                                top: 0,
                                width: CONTROL_PANEL_WIDTH,
                                height: window.innerHeight
                            }), 
                            //new InputMIDI());
                            new InputKeyboard());
            app.initialize();
            
